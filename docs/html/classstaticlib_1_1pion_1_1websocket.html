<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>staticlib_pion: staticlib::pion::websocket Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">staticlib_pion
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestaticlib.html">staticlib</a></li><li class="navelem"><a class="el" href="namespacestaticlib_1_1pion.html">pion</a></li><li class="navelem"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classstaticlib_1_1pion_1_1websocket-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">staticlib::pion::websocket Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class represents a WebSocket RFC 6455 connection.  
 <a href="classstaticlib_1_1pion_1_1websocket.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="websocket_8hpp_source.html">staticlib/pion/websocket.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab33b58dadf7708608c865f2ec049f0c2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#ab33b58dadf7708608c865f2ec049f0c2">websocket</a> (std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1http__request.html">http_request</a> &gt; req, std::shared_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1tcp__connection.html">tcp_connection</a> &gt; conn, std::function&lt; void(std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;)&gt; open_handler, std::function&lt; void(std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;)&gt; message_handler, std::function&lt; void(std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;)&gt; close_handler, size_t max_receive_cache_size_bytes=(1024 *1024), size_t max_cached_frames_count=1024)</td></tr>
<tr class="memdesc:ab33b58dadf7708608c865f2ec049f0c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ab33b58dadf7708608c865f2ec049f0c2"></a><br/></td></tr>
<tr class="memitem:a2245a6167ac9d976ee04756dd2ab6418"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a2245a6167ac9d976ee04756dd2ab6418">~websocket</a> () STATICLIB_NOEXCEPT</td></tr>
<tr class="memdesc:a2245a6167ac9d976ee04756dd2ab6418"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor, closes the TCP connection.  <a href="#a2245a6167ac9d976ee04756dd2ab6418"></a><br/></td></tr>
<tr class="memitem:ab10717dca96c7b5ab2558a523a3f55ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#ab10717dca96c7b5ab2558a523a3f55ec">websocket</a> (const <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &amp;)</td></tr>
<tr class="memdesc:ab10717dca96c7b5ab2558a523a3f55ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy constructor.  <a href="#ab10717dca96c7b5ab2558a523a3f55ec"></a><br/></td></tr>
<tr class="memitem:af4685567be72fe7825c5f6140ec68ea0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#af4685567be72fe7825c5f6140ec68ea0">operator=</a> (const <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &amp;)</td></tr>
<tr class="memdesc:af4685567be72fe7825c5f6140ec68ea0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy-assignment operator.  <a href="#af4685567be72fe7825c5f6140ec68ea0"></a><br/></td></tr>
<tr class="memitem:a8a9010aeb254950711d95dce01d18a21"><td class="memItemLeft" align="right" valign="top">const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a8a9010aeb254950711d95dce01d18a21">get_id</a> ()</td></tr>
<tr class="memdesc:a8a9010aeb254950711d95dce01d18a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">ID for this WebSocket connection.  <a href="#a8a9010aeb254950711d95dce01d18a21"></a><br/></td></tr>
<tr class="memitem:a73f65c4b6c892359c44d6447df8f26aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstaticlib_1_1pion_1_1http__request.html">http_request</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a73f65c4b6c892359c44d6447df8f26aa">get_request</a> ()</td></tr>
<tr class="memdesc:a73f65c4b6c892359c44d6447df8f26aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to handshake request.  <a href="#a73f65c4b6c892359c44d6447df8f26aa"></a><br/></td></tr>
<tr class="memitem:a614e6a3444971d519ef138b2839fcd39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstaticlib_1_1pion_1_1tcp__connection.html">tcp_connection</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a614e6a3444971d519ef138b2839fcd39">get_connection</a> ()</td></tr>
<tr class="memdesc:a614e6a3444971d519ef138b2839fcd39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reference to TCP connection.  <a href="#a614e6a3444971d519ef138b2839fcd39"></a><br/></td></tr>
<tr class="memitem:a1b335c21d142c8b7011a4af2685bb9e2"><td class="memItemLeft" align="right" valign="top">sl::websocket::frame_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a1b335c21d142c8b7011a4af2685bb9e2">message_type</a> ()</td></tr>
<tr class="memdesc:a1b335c21d142c8b7011a4af2685bb9e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type (opcode) of the currently cached frame.  <a href="#a1b335c21d142c8b7011a4af2685bb9e2"></a><br/></td></tr>
<tr class="memitem:af59136e11abafe301b5eeb5191fe990b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstaticlib_1_1pion_1_1websocket__detail_1_1msg__data__src.html">websocket_detail::msg_data_src</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#af59136e11abafe301b5eeb5191fe990b">message_data</a> ()</td></tr>
<tr class="memdesc:af59136e11abafe301b5eeb5191fe990b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Source that can be used to read unmasked payload data from one or more (for continuation) received frames.  <a href="#af59136e11abafe301b5eeb5191fe990b"></a><br/></td></tr>
<tr class="memitem:ade0d0ca9ec215f0ddd44d0ea020b3b47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#ade0d0ca9ec215f0ddd44d0ea020b3b47">write</a> (sl::io::span&lt; const char &gt; data)</td></tr>
<tr class="memdesc:ade0d0ca9ec215f0ddd44d0ea020b3b47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write payload content.  <a href="#ade0d0ca9ec215f0ddd44d0ea020b3b47"></a><br/></td></tr>
<tr class="memitem:a705863d499307172a29ac462709c4641"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a705863d499307172a29ac462709c4641">write_nocopy</a> (sl::io::span&lt; const char &gt; data)</td></tr>
<tr class="memdesc:a705863d499307172a29ac462709c4641"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write payload content; the data written is not copied, and therefore must persist until the message has finished sending.  <a href="#a705863d499307172a29ac462709c4641"></a><br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a8ffb13b61cfce722f90bfdd1f753cef6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a8ffb13b61cfce722f90bfdd1f753cef6">is_websocket_upgrade</a> (const <a class="el" href="classstaticlib_1_1pion_1_1http__request.html">http_request</a> &amp;req)</td></tr>
<tr class="memdesc:a8ffb13b61cfce722f90bfdd1f753cef6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether specified request is a WebSocket handshake.  <a href="#a8ffb13b61cfce722f90bfdd1f753cef6"></a><br/></td></tr>
<tr class="memitem:a05a15fd211d84fa4e4d95f83b877d57e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a05a15fd211d84fa4e4d95f83b877d57e">start</a> (std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt; self)</td></tr>
<tr class="memdesc:a05a15fd211d84fa4e4d95f83b877d57e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the processing of WebSocker connection: asynchronously send handshake response and reads incoming messages.  <a href="#a05a15fd211d84fa4e4d95f83b877d57e"></a><br/></td></tr>
<tr class="memitem:ac64522bf64a42c0a69c86a3bf7e139db"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#ac64522bf64a42c0a69c86a3bf7e139db">receive</a> (std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt; self)</td></tr>
<tr class="memdesc:ac64522bf64a42c0a69c86a3bf7e139db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronously receives the incoming messages.  <a href="#ac64522bf64a42c0a69c86a3bf7e139db"></a><br/></td></tr>
<tr class="memitem:a5994ec795c5e2913f7a6a723980321df"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a5994ec795c5e2913f7a6a723980321df">send</a> (std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt; self, sl::websocket::frame_type msg_type=sl::websocket::frame_type::text)</td></tr>
<tr class="memdesc:a5994ec795c5e2913f7a6a723980321df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronously sends the buffered payload using the specified frame type.  <a href="#a5994ec795c5e2913f7a6a723980321df"></a><br/></td></tr>
<tr class="memitem:aa7292658f99fb7e5cb98016cbd4a2a45"><td class="memTemplParams" colspan="2">template&lt;typename Handler &gt; </td></tr>
<tr class="memitem:aa7292658f99fb7e5cb98016cbd4a2a45"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#aa7292658f99fb7e5cb98016cbd4a2a45">send_message</a> (std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt; self, sl::websocket::frame_type msg_type, Handler handler)</td></tr>
<tr class="memdesc:aa7292658f99fb7e5cb98016cbd4a2a45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronously sends the buffered payload using the specified frame type.  <a href="#aa7292658f99fb7e5cb98016cbd4a2a45"></a><br/></td></tr>
<tr class="memitem:a286e96808e92fab663a2baa39d451dfb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#a286e96808e92fab663a2baa39d451dfb">broadcast</a> (std::vector&lt; std::shared_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1tcp__connection.html">tcp_connection</a> &gt;&gt; &amp;connections, sl::io::span&lt; const char &gt; msg, sl::websocket::frame_type msg_type=sl::websocket::frame_type::text)</td></tr>
<tr class="memdesc:a286e96808e92fab663a2baa39d451dfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broadcasts the specified message as a WebSocket frame to every specified connection.  <a href="#a286e96808e92fab663a2baa39d451dfb"></a><br/></td></tr>
<tr class="memitem:adbb8228ce84cf556ee109ea58927d809"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html#adbb8228ce84cf556ee109ea58927d809">close</a> (std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt; self, const close_status &amp;status=close_status::normal)</td></tr>
<tr class="memdesc:adbb8228ce84cf556ee109ea58927d809"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends <code>close</code> frame to client and closes the underlying TCP connection.  <a href="#adbb8228ce84cf556ee109ea58927d809"></a><br/></td></tr>
</table>
<a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This class represents a WebSocket RFC 6455 connection. </p>
</div><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab33b58dadf7708608c865f2ec049f0c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">staticlib::pion::websocket::websocket </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1http__request.html">http_request</a> &gt;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1tcp__connection.html">tcp_connection</a> &gt;&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;)&gt;&#160;</td>
          <td class="paramname"><em>open_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;)&gt;&#160;</td>
          <td class="paramname"><em>message_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;)&gt;&#160;</td>
          <td class="paramname"><em>close_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_receive_cache_size_bytes</em> = <code>(1024*1024)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_cached_frames_count</em> = <code>1024</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>HTTP request with handshake </td></tr>
    <tr><td class="paramname">conn</td><td>TCP connection used for handshake </td></tr>
    <tr><td class="paramname">open_handler</td><td>handler for <code>open</code> events </td></tr>
    <tr><td class="paramname">message_handler</td><td>handler for <code>message</code> events </td></tr>
    <tr><td class="paramname">close_handler</td><td>handler for <code>close</code>events, MUST NOT be used to send or receive messages </td></tr>
    <tr><td class="paramname">max_receive_cache_size_bytes</td><td>max allowed size of the receive buffer, 1MB by default </td></tr>
    <tr><td class="paramname">max_cached_frames_count</td><td>max allowed number of continuation frames, 1024 by default </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2245a6167ac9d976ee04756dd2ab6418"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">staticlib::pion::websocket::~websocket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor, closes the TCP connection. </p>

</div>
</div>
<a class="anchor" id="ab10717dca96c7b5ab2558a523a3f55ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">staticlib::pion::websocket::websocket </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deleted copy constructor. </p>

</div>
</div>
<h2>Member Function Documentation</h2>
<a class="anchor" id="a286e96808e92fab663a2baa39d451dfb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void staticlib::pion::websocket::broadcast </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::shared_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1tcp__connection.html">tcp_connection</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>connections</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sl::io::span&lt; const char &gt;&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sl::websocket::frame_type&#160;</td>
          <td class="paramname"><em>msg_type</em> = <code>sl::websocket::frame_type::text</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Broadcasts the specified message as a WebSocket frame to every specified connection. </p>
<p>Thread-safe: may be called concurrently from any thread.</p>
<p>May cause the broadcast message to interleave with other frames (put in the middle of continuation sequence, or in the middle to TCP fragmented sequence), if target connection is used for outbound traffic at the the time of broadcast.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connections</td><td>list of connections to broadcast </td></tr>
    <tr><td class="paramname">msg</td><td>message to broadcast </td></tr>
    <tr><td class="paramname">msg_type</td><td>frame type (opcode) to use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adbb8228ce84cf556ee109ea58927d809"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void staticlib::pion::websocket::close </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const close_status &amp;&#160;</td>
          <td class="paramname"><em>status</em> = <code>close_status::normal</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends <code>close</code> frame to client and closes the underlying TCP connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>websocket instance </td></tr>
    <tr><td class="paramname">status</td><td>close status to include with <code>close</code> frame </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a614e6a3444971d519ef138b2839fcd39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstaticlib_1_1pion_1_1tcp__connection.html">tcp_connection</a>&amp; staticlib::pion::websocket::get_connection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to TCP connection. </p>
<dl class="section return"><dt>Returns</dt><dd>connection </dd></dl>

</div>
</div>
<a class="anchor" id="a8a9010aeb254950711d95dce01d18a21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string&amp; staticlib::pion::websocket::get_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ID for this WebSocket connection. </p>
<dl class="section return"><dt>Returns</dt><dd>value of <code>Sec-WebSocket-Key</code> request handshake header </dd></dl>

</div>
</div>
<a class="anchor" id="a73f65c4b6c892359c44d6447df8f26aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstaticlib_1_1pion_1_1http__request.html">http_request</a>&amp; staticlib::pion::websocket::get_request </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reference to handshake request. </p>
<dl class="section return"><dt>Returns</dt><dd>handshake request </dd></dl>

</div>
</div>
<a class="anchor" id="a8ffb13b61cfce722f90bfdd1f753cef6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool staticlib::pion::websocket::is_websocket_upgrade </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstaticlib_1_1pion_1_1http__request.html">http_request</a> &amp;&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether specified request is a WebSocket handshake. </p>

</div>
</div>
<a class="anchor" id="af59136e11abafe301b5eeb5191fe990b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstaticlib_1_1pion_1_1websocket__detail_1_1msg__data__src.html">websocket_detail::msg_data_src</a> staticlib::pion::websocket::message_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Source that can be used to read unmasked payload data from one or more (for continuation) received frames. </p>
<p>Invalidated on <code>send</code> or <code>receive</code> operation over this instance</p>
<dl class="section return"><dt>Returns</dt><dd>unmasked payload data </dd></dl>

</div>
</div>
<a class="anchor" id="a1b335c21d142c8b7011a4af2685bb9e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sl::websocket::frame_type staticlib::pion::websocket::message_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Type (opcode) of the currently cached frame. </p>
<dl class="section return"><dt>Returns</dt><dd>opcode of the last cached frame, <code>invalid</code> type if no frames are cached </dd></dl>

</div>
</div>
<a class="anchor" id="af4685567be72fe7825c5f6140ec68ea0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a>&amp; staticlib::pion::websocket::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deleted copy-assignment operator. </p>

</div>
</div>
<a class="anchor" id="ac64522bf64a42c0a69c86a3bf7e139db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void staticlib::pion::websocket::receive </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asynchronously receives the incoming messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>websocket instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5994ec795c5e2913f7a6a723980321df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void staticlib::pion::websocket::send </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sl::websocket::frame_type&#160;</td>
          <td class="paramname"><em>msg_type</em> = <code>sl::websocket::frame_type::text</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asynchronously sends the buffered payload using the specified frame type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>websocket instance </td></tr>
    <tr><td class="paramname">msg_type</td><td>frame opcode to use </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa7292658f99fb7e5cb98016cbd4a2a45"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Handler &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void staticlib::pion::websocket::send_message </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sl::websocket::frame_type&#160;</td>
          <td class="paramname"><em>msg_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Handler&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asynchronously sends the buffered payload using the specified frame type. </p>
<p>Handler is invoked after send is completed successfully.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>websocket instance </td></tr>
    <tr><td class="paramname">msg_type</td><td>frame opcode to use </td></tr>
    <tr><td class="paramname">handler</td><td>handler function to invoke on successful send </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a05a15fd211d84fa4e4d95f83b877d57e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void staticlib::pion::websocket::start </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classstaticlib_1_1pion_1_1websocket.html">websocket</a> &gt;&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts the processing of WebSocker connection: asynchronously send handshake response and reads incoming messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>websocket instance </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ade0d0ca9ec215f0ddd44d0ea020b3b47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void staticlib::pion::websocket::write </td>
          <td>(</td>
          <td class="paramtype">sl::io::span&lt; const char &gt;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write payload content. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>to append to the payload content </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a705863d499307172a29ac462709c4641"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void staticlib::pion::websocket::write_nocopy </td>
          <td>(</td>
          <td class="paramtype">sl::io::span&lt; const char &gt;&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write payload content; the data written is not copied, and therefore must persist until the message has finished sending. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>the data to append to the payload content </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>staticlib/pion/<a class="el" href="websocket_8hpp_source.html">websocket.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 20 2018 12:45:12 for staticlib_pion by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
